extends layout

block head

block content
  .pb-2.mt-2
    if user.profile.name == ''
      h3 Welcome #{user.email}
    else
      h3 Welcome #{user.profile.name}
    p Here are previous URLs you have shortened. 
    .d-flex.justify-content-end 
      a(href='/urls/' class='fas fa-redo text-dark text-decoration-none mx-2' title="Reset to default")
      a(href='/urls/sortDes' class='fas fa-sort-amount-down text-dark text-decoration-none mx-2' title="Sort by descending date")
      a(href='/urls/sortAsc' class='fas fa-sort-amount-up-alt text-dark text-decoration-none mx-2' title="Sort by ascending date")
    .table-responsive
      table.table.table-striped
        thead
          tr
            th(scope='col') Alias
            th(scope='col') Date 
            th(scope='col') Original URL
            th(scope='col') Visits
        tbody
          each user in userInfo
            if user.id == currentUser
          each link,index in urlInfo
            if link.user == user.email
              tr
                td
                  a(href=`${link.slug}` target="_blank" id=`shortLink-${index}`) #{link.slug}
                td
                  p= moment(link.date).format('MMMM Do YYYY, h:mm:ss a')
                td
                  a(href=`//${link.longUrl.replace(/(^\w+:|^)\/\//, '')}` target="_blank ") #{link.longUrl}
                td
                  p #{link.clickCounter}
                td
                  a.btn.btn-success.mx-1.my-3#editUrlBtn(href=`/urls/edit/${link.id}`)
                    i.fas.fa-edit
                  button.btn.btn-primary.mx-1.my-3(id=`copyUrlBtn-${index}`)
                    i.fas.fa-clipboard
                  form.d-inline-block#delete-form(action="#", method="post")
                  button.btn.btn-danger.mx-1.my-3#delUrlBtn(type='submit')
                    i.fas.fa-trash
  script(src="/js/urlBtns.js")